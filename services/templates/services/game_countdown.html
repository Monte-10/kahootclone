{% extends 'base.html' %}

{% block title %}
   Countdown
{% endblock %}

{% block stylesheets %}
{% endblock %}

{%block header%}
{%endblock%}

{% block content %}
    
    <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center bg-info">
        <div class="alert alert-success container p-none text-center" role="alert">
            <h2>We will start in: </h2>
            <h1 class="display-1" id="countdown"></h1>
            <h2>seconds</h2>    
        </div>
        {% load static %}
        <audio controls loop autoplay hidden>
            <source src="{% static 'audio/countdown.mp3' %}" type="audio/mpeg"> Your browser does not support the audio element .
        </audio>
    </div>

    <script>
      var countdown = "{{ game.countdownTime }}";
      
      function updateCountdown() {
        if (countdown === -1) {
          window.location.reload();
        } else {
            if (countdown === 0) {
                document.getElementById("countdown").innerHTML = "BLAST OFF!!";
            } else {
                document.getElementById("countdown").innerHTML = countdown;
            }
          countdown--;
          setTimeout(updateCountdown, 1000);
        }
      }
      
      updateCountdown();
    </script>
{% endblock %}
