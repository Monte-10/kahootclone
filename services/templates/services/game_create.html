{% extends 'base.html' %}

{% block title %}
   Game
{% endblock %}

{% block stylesheets %}
{% endblock %}

{%block header%}
{%endblock%}

{% block content %}
    <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center bg-info">

        {%if is_owner == False %}
            <h1>Game does not belong to logged user</h1>
        {%else%}
        <div class="alert alert-success container p-none text-center" role="alert">
            <h3>Connect to https://127.0.0.1:8001/djangoClientServer/gamejoin/</h3>
            with PIN
            <h3>{{ game.publicId }}</h3>
        </div>
        
        <p>As soon as you log in, your alias will be displayed here</p>
        <a class="btn btn-primary btn-lg mr-3" href="{% url 'game-count-down' %}" role="button">Get Started</a>
        <h2>List of participants: </h2>
            
        <div id="test"></div>
        
        {% load static %}
        <audio controls loop autoplay hidden>
            <source src="{% static 'audio/lobby.mp3' %}" type="audio/mpeg"> Your browser does not support the audio element .
        </audio>
    </div>
    
    
    
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <style>
        html::-webkit-scrollbar{display:none !important}body::-webkit-scrollbar{display:none !important}
    </style>
    <script>
        function refreshTime() {
            $.ajax({
                url: "{% url 'game-updateparticipant' %}",
                success: function (data) {
                    console.log("success function called");
                    $('#test').html(data);
                    setTimeout(refreshTime,3000);
                }
            });
        }
        
        
        $(document).ready(function () {
            console.log("setting interval");
            refreshTime();
        });
    </script>
    
    {% endif %}
{% endblock %}